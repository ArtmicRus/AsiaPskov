{% extends "app/layout.html" %}
{% block content %}
{% load static %}

<div id="ProductCarousel" class="carousel slide col-4 mx-auto" data-bs-ride="carousel" data-bs-interval="5000">
    <ol class="carousel-indicators">
        <li type="button" data-bs-target="#ProductCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></li>
        <li type="button" data-bs-target="#ProductCarousel" data-bs-slide-to="1" aria-label="Slide 2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="carousel-item active ">
            <img src=" {% static 'app/content/Ланч сет.jpg'%} " class="d-block img-fluid carousel-block" alt="Slide 1">
            <div class="carousel-caption d-none d-md-block">
                <h5>Ланч сет</h5>
            </div>
        </div>
        <div class="carousel-item ">
            <img src=" {% static 'app/content/Софт сет.jpg'%} " class="d-block img-fluid carousel-block" alt="Slide 2">
            <div class="carousel-caption d-none d-md-block">
                <h5>Софт сет</h5>
            </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#ProductCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Предыдущий</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#ProductCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Следующий</span>
        </button>
    </div>
</div>

<hr />

<div class="d-flex justify-content-center">
    <div class="row">
        
        <div class="col-auto">
            {% if cat_selected == 0 %}
            <a class="save btn btn-success" href="0"> Все товары </a>
            {% else %}
            <a class="save btn btn-primary" href="0"> Все товары </a>
            {% endif %}
        </div>

        {% for category in categories %}

        <div class="col-auto">
            {% if category.pk == cat_selected %}
            <a class="save btn btn-success" href="{{category.get_absolute_url}}"> {{category.name}} </a>
            {% else %}
            <a class="save btn btn-primary" href="{{category.get_absolute_url}}"> {{category.name}} </a>
            {% endif %}
        </div>

        {% endfor %}

    </div>
</div>

<hr />

<div class="row">

    {% for product in products %}

    <div class="col-sm-12 col-md-6 col-xl-4 col-xxl-3">
        <div class="card mb-3">
            <img src="{{product.image.url }}" class="card-img-top">
            <div class="card-body">
                <h5 class="card-title">{{product.name}}</h5>
                <p class="card-text">{{product.price}} руб.</p>
                <div>
                    <a href="{% url 'add_to_cart' %}?product={{ product.id }}" class="btn btn-warning btn-xs
                        {% if not user.is_authenticated %} disabled {% endif %}">
                        Добавить в корзину
                    </a>
                    <button type="button" class="btn btn-lightbtn-light btn-xs" data-bs-toggle="modal" data-bs-target="#ProductDescriptionModal">
                        Подробнее
                    </button>
                </div>



            </div>
        </div>
    </div>


    {% endfor %}

    <!-- Модальное окно для вывода краткой информации о товаре-->
    <div class="modal fade" id="ProductDescriptionModal" tabindex="-1" aria-labelledby="ProductDescriptionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="ProductDescriptionModalLabel"> Краткое описание </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    {{product.description}}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
                </div>
            </div>
        </div>
    </div>



</div>


    {% endblock %}

